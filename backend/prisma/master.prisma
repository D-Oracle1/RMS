// ===========================================
// RMS Platform - Master Database Schema
// Stores company/tenant records and super admin accounts
// ===========================================

generator client {
  provider      = "prisma-client-js"
  output        = "../src/generated/master-client"
  binaryTargets = ["native", "rhel-openssl-3.0.x"]
}

datasource db {
  provider  = "postgresql"
  url       = env("MASTER_DATABASE_URL")
}

model Company {
  id           String   @id @default(uuid())
  name         String
  slug         String   @unique
  domain       String   @unique
  databaseUrl  String
  logo         String?
  primaryColor String?  @default("#3b82f6")
  inviteCode   String   @unique
  isActive     Boolean  @default(true)
  plan         String   @default("standard")
  maxUsers     Int      @default(50)
  createdAt    DateTime @default(now())
  updatedAt    DateTime @updatedAt

  @@index([domain])
  @@index([inviteCode])
  @@map("companies")
}

model SuperAdmin {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  firstName String
  lastName  String
  phone     String?
  avatar    String?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt

  @@map("super_admins")
}
